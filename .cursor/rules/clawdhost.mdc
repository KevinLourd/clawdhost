---
description: ClawdHost project guidelines
globs: 
alwaysApply: true
---

App name: "ClawdHost"
Managed MoltBot Hosting Platform - "Your AI, always on, always yours"

What we are:
- Managed hosting for MoltBot (AI assistant)
- Web-based onboarding (no terminal required for users)
- VPS provisioning + MoltBot pre-configured

What we are NOT:
- Not MoltBot itself (we build on top of it)
- Not modifying MoltBot core

English language everywhere in what we produce:
- Website
- Functions
- Code
- Comments
Only our chat/1-1 discussions can be whatever language

Monorepo Structure:
- apps/landing/ → clawdhost.tech (Vercel: clawdhost-landing)
- apps/app/ → app.clawdhost.tech (Vercel: clawdhost-app)
- apps/worker/ → Railway
- packages/shared/ → Shared types

Design:
- Light theme with green primary
- NextJS, Tailwind, Shadcn
- Minimalist, clean, modern
- Reassuring UX: progress indicators, confirmations
- No terminal jargon visible to end users

About command execution in chat:
- Always execute commands in chat. Don't ask permission.
- Stop asking me to execute commands in my shell. All commands must be by you, from the chat.

Database:
- Neon PostgreSQL
- Use Neon MCP (project-1-clawdhost-Neon) to verify database state
- Tables: users, instances, provisioning_logs

Neon Project: clawdhost (sparkling-fog-74915550)
- Production: postgresql://neondb_owner:npg_4CstETVGkZi0@ep-young-rice-a18hjmtu-pooler.ap-southeast-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require

Migrations:
- Ne fais jamais de migration en direct via NEON MCP
- N'edit jamais une migration file déjà migrated up. Recrée une nouvelle à chaque fois.
- S'il y a une erreur dans une migration, ne fait jamais un migrate down. Recrée une nouvelle migration corrective.

All userId communications must be based on clerkUserId!

Code files length: Keep all code files below 200 lines. If you see a larger file, split it.

Lazy-init pattern for external services (to avoid build-time errors):
- Use getStripe(), getResend() pattern, not module-level instantiation
